<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="icon" type="image/svg+xml" href="/slimfaas.svg" data-next-head=""/><title data-next-head="">SlimFaas : The slimmest and simplest Function As A Service</title><meta property="og:title" content="SlimFaas : The slimmest and simplest Function As A Service" data-next-head=""/><meta property="og:description" content="Deploy functions effortlessly with SlimFaas, the ultra-light FaaS platform." data-next-head=""/><meta property="og:image" content="https://github.com/SlimPlanet/SlimFaas/blob/main/documentation/SlimFaas.png?raw=true" data-next-head=""/><meta property="og:url" content="https://github.com/SlimPlanet/SlimFaas" data-next-head=""/><meta property="og:type" content="website" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:title" content="SlimFaas : The slimmest and simplest Function As A Service" data-next-head=""/><meta name="twitter:description" content="Deploy functions effortlessly with SlimFaas, the ultra-light FaaS platform." data-next-head=""/><meta name="twitter:image" content="https://github.com/SlimPlanet/SlimFaas/blob/main/documentation/SlimFaas.png?raw=true" data-next-head=""/><link rel="preload" href="/_next/static/chunks/f79d8dc54c1f1d48.css" as="style"/><script id="consent-mode-default" data-nscript="beforeInteractive">
                  window.dataLayer = window.dataLayer || [];
                  function gtag(){dataLayer.push(arguments);}
                  gtag('consent', 'default', {
                    analytics_storage: 'denied',
                    ad_storage: 'denied',
                    ad_user_data: 'denied',
                    ad_personalization: 'denied',
                    wait_for_update: 500
                  });
                </script><link rel="stylesheet" href="/_next/static/chunks/f79d8dc54c1f1d48.css" data-n-g=""/><noscript data-n-css=""></noscript><script src="/_next/static/chunks/c81b168a3a0921e5.js" defer=""></script><script src="/_next/static/chunks/c692ace36a839e21.js" defer=""></script><script src="/_next/static/chunks/c03b620c110207e6.js" defer=""></script><script src="/_next/static/chunks/31ff616d2f5120e5.js" defer=""></script><script src="/_next/static/chunks/turbopack-24e9b88111e1a012.js" defer=""></script><script src="/_next/static/chunks/a718f2a1717e78ee.js" defer=""></script><script src="/_next/static/chunks/74ec02afeb306559.js" defer=""></script><script src="/_next/static/chunks/turbopack-ac7f771156808ddf.js" defer=""></script><script src="/_next/static/pWr_xSZtIWvsnZ-W185ut/_ssgManifest.js" defer=""></script><script src="/_next/static/pWr_xSZtIWvsnZ-W185ut/_buildManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PKM3T5QT" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="layout"><nav class="layout__navbar navbar"><div class="navbar__left"><a class="navbar__logo-link" href="/"><img alt="Logo" loading="lazy" width="64" height="64" decoding="async" data-nimg="1" class="navbar__logo" style="color:transparent" src="https://github.com/cncf/artwork/blob/main/projects/slimfaas/icon/white/slimfaas-icon-white.svg?raw=true"/></a><button class="navbar__toggle " aria-label="Toggle menu" aria-expanded="false" aria-controls="navbar-main-list" type="button"><span class="navbar__toggle-bar"></span><span class="navbar__toggle-bar"></span><span class="navbar__toggle-bar"></span></button><ul id="navbar-main-list" class="navbar__list "><li class="navbar__item"><a class="navbar__link" href="/">Home</a></li><li class="navbar__item"><a class="navbar__link" href="/get-started">Get Started</a></li><li class="navbar__item navbar__item--has-submenu "><button type="button" class="navbar__link navbar__link--submenu-toggle" aria-haspopup="true" aria-expanded="false" aria-controls="navbar-functions-submenu">Functions<span class="navbar__submenu-icon" aria-hidden="true">▾</span></button><ul id="navbar-functions-submenu" class="navbar__submenu "><li class="navbar__submenu-item"><a class="navbar__submenu-link" href="/functions">Functions</a></li><li class="navbar__submenu-item"><a class="navbar__submenu-link" href="/events">Events</a></li><li class="navbar__submenu-item"><a class="navbar__submenu-link" href="/jobs">Jobs</a></li><li class="navbar__submenu-item"><a class="navbar__submenu-link" href="/opentelemetry">Open Telemetry</a></li></ul></li><li class="navbar__item navbar__item--has-submenu "><button type="button" class="navbar__link navbar__link--submenu-toggle" aria-haspopup="true" aria-expanded="false" aria-controls="navbar-scale-submenu">Scale<span class="navbar__submenu-icon" aria-hidden="true">▾</span></button><ul id="navbar-scale-submenu" class="navbar__submenu "><li class="navbar__submenu-item"><a class="navbar__submenu-link" href="/autoscaling">Autoscaling</a></li><li class="navbar__submenu-item"><a class="navbar__submenu-link" href="/kafka">Kafka Connector</a></li><li class="navbar__submenu-item"><a class="navbar__submenu-link" href="/planet-saver">PlanetSaver</a></li></ul></li><li class="navbar__item navbar__item--has-submenu "><button type="button" class="navbar__link navbar__link--submenu-toggle" aria-haspopup="true" aria-expanded="false" aria-controls="navbar-data-submenu">Data<span class="navbar__submenu-icon" aria-hidden="true">▾</span></button><ul id="navbar-data-submenu" class="navbar__submenu "><li class="navbar__submenu-item"><a class="navbar__submenu-link" href="/data-files">Files</a></li><li class="navbar__submenu-item"><a class="navbar__submenu-link" href="/data-sets">Sets</a></li></ul></li><li class="navbar__item"><a class="navbar__link" href="/how-it-works">How it works</a></li><li class="navbar__item"><a class="navbar__link" href="/mcp">MCP</a></li></ul></div><a href="https://github.com/SlimPlanet/SlimFaas" class="navbar__github" target="_blank" rel="noopener noreferrer"><svg class="navbar__github-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 0.296875C5.37256 0.296875 0 5.66943 0 12.2969C0 17.6394 3.43848 22.146 8.20703 23.7744C8.80762 23.8848 9.02344 23.5156 9.02344 23.1982C9.02344 22.9277 9.0127 21.9941 9.00781 20.9102C5.67188 21.6572 4.96875 19.1738 4.96875 19.1738C4.4375 17.8193 3.64062 17.498 3.64062 17.498C2.54785 16.7939 3.72461 16.8105 3.72461 16.8105C4.93359 16.8896 5.55469 18.0332 5.55469 18.0332C6.625 19.9316 8.37207 19.4082 9.0625 19.1113C9.16797 18.3301 9.45898 17.7939 9.78906 17.4863C7.14062 17.1807 4.34766 16.1582 4.34766 11.6084C4.34766 10.3223 4.8125 9.22852 5.58984 8.36133C5.46094 8.05566 5.04883 6.8418 5.71094 5.16406C5.71094 5.16406 6.72559 4.83008 9.00488 6.44336C9.97852 6.18164 11.0078 6.05078 12.0371 6.04688C13.0664 6.05078 14.0957 6.18164 15.0693 6.44336C17.3486 4.83008 18.3623 5.16406 18.3623 5.16406C19.0244 6.8418 18.6123 8.05566 18.4824 8.36133C19.2598 9.22852 19.7246 10.3223 19.7246 11.6084C19.7246 16.168 16.9277 17.1768 14.2734 17.4746C14.6914 17.8525 15.0547 18.5742 15.0547 19.7012C15.0547 21.3076 15.0391 22.6631 15.0391 23.1982C15.0391 23.5156 15.2559 23.8896 15.8613 23.7744C20.625 22.146 24.0664 17.6394 24.0664 12.2969C24 5.66943 18.6274 0.296875 12 0.296875Z"></path></svg></a></nav><main class="layout__content"><div><div><html><head></head><body><h1>How SlimFaas Works (Architecture)</h1>
<p>Under the hood, SlimFaas is an <strong>HTTP proxy</strong> that intercepts requests for your functions, jobs, or events.
It handles scaling, routing, and state management.</p>
<hr>
<h2>1. Core Concepts</h2>
<ol>
<li>
<p><strong>SlimFaas Pod</strong>
Runs as a <strong>Deployment</strong> or <strong>StatefulSet</strong> (commonly 3 replicas in production). Each pod has internal workers:</p>
<ul>
<li><strong>SlimWorker</strong>: Handles async call processing.</li>
<li><strong>SlimDataSynchronizationWorker</strong>: Manages the embedded database cluster (Raft-based).</li>
<li><strong>HistorySynchronizationWorker</strong>: Syncs request history and logs.</li>
<li><strong>ReplicasSynchronizationWorker</strong>: Keeps track of your function pods’ replicas and statuses in Kubernetes.</li>
<li><strong>ReplicasScaleWorker</strong>: If the SlimFaas pod is leader, it scales up/down your function pods.</li>
</ul>
</li>
<li>
<p><strong>SlimData</strong>
A built-in key-value store based on <a href="https://raft.github.io/">Raft</a>, provided by .NET’s <a href="https://github.com/dotnet/dotNext">dotNext</a>.
This database is crucial for consistent state among SlimFaas pods.</p>
</li>
<li>
<p><strong>Annotations</strong>
Add or remove SlimFaas <strong>annotations</strong> on your pods/Deployments to control scaling, concurrency, visibility, and timeouts.</p>
</li>
<li>
<p><strong>Public vs. Private</strong>
Restricts who can access a function/job (any external caller vs. same-namespace or trusted pods).</p>
</li>
</ol>
<hr>
<h2>2. Request Flow</h2>
<h3>Synchronous HTTP Calls</h3>
<ol>
<li><strong>Client → SlimFaas</strong>
<code>GET /function/&lt;functionName&gt;/...</code></li>
<li><strong>SlimFaas</strong> ensures the target function is scaled up and ready.</li>
<li><strong>SlimFaas → Function</strong>
Wait for the function’s response.</li>
<li><strong>SlimFaas</strong> returns the function’s response to the client.</li>
</ol>
<p><img src="https://github.com/AxaFrance/SlimFaas/blob/main/documentation/sync_http_call.PNG?raw=true" alt="sync_http_call.PNG"></p>
<h3>Asynchronous HTTP Calls</h3>
<ol>
<li><strong>Client → SlimFaas</strong>
<code>GET /async-function/&lt;functionName&gt;/...</code> (returns immediately with <code>202 Accepted</code>).</li>
<li><strong>SlimFaas</strong> enqueues the request in SlimData.</li>
<li><strong>SlimWorker</strong> processes requests in the background, respecting concurrency limits.</li>
<li><strong>Function</strong> handles each request. SlimFaas logs outcomes in SlimData.</li>
</ol>
<p><img src="https://github.com/AxaFrance/SlimFaas/blob/main/documentation/async_http_call.PNG?raw=true" alt="async_http_call.PNG"></p>
<h3>Publish/Subscribe (Events)</h3>
<ol>
<li><strong>Client → SlimFaas</strong>
<code>POST /publish-event/&lt;eventName&gt;</code> with JSON payload.</li>
<li>SlimFaas synchronously broadcasts the payload to each subscribed function’s replicas.</li>
<li>Each replica processes the event and responds individually to SlimFaas.</li>
</ol>
<p><img src="https://github.com/AxaFrance/SlimFaas/blob/main/documentation/publish_sync_call.png?raw=true" alt="publish_sync_call.png"></p>
<hr>
<h2>3. Scaling Logic</h2>
<ul>
<li><strong>Scale to 0</strong> after a defined inactivity (<code>SlimFaas/TimeoutSecondBeforeSetReplicasMin</code>).</li>
<li><strong>Scale from 0 to 1+</strong> when a new request arrives or <code>wake-function</code> is called.</li>
<li><strong>Optional</strong>: Use standard K8s Horizontal Pod Autoscalers or KEDA if you need more advanced scaling triggers.</li>
</ul>
<hr>
<h2>4. CPU-Aware Rate Limiting</h2>
<p>SlimFaas includes built-in <strong>load shedding</strong> to protect your cluster during traffic spikes by automatically rejecting requests when CPU usage exceeds configurable thresholds.</p>
<h3>Key Features</h3>
<ul>
<li><strong>Hysteresis support</strong>: Prevents rapid toggling between limited and normal states with separate high/low thresholds.</li>
<li><strong>Port-specific</strong>: Applies to all SlimFaas ports <strong>except</strong> the SlimData internal port (used for cluster coordination).</li>
<li><strong>Path exclusions</strong>: Configurable list of paths to exclude (e.g., health checks, metrics endpoints).</li>
<li><strong>Native AOT compatible</strong>: Minimal performance overhead.</li>
</ul>
<h3>How It Works</h3>
<ol>
<li><strong>Monitoring</strong>: A background service continuously samples CPU usage at a configurable interval.</li>
<li><strong>Activation</strong>: When CPU exceeds the <code>CpuHighThreshold</code>, the middleware starts rejecting requests with <code>429 Too Many Requests</code>.</li>
<li><strong>Deactivation</strong>: When CPU drops below the <code>CpuLowThreshold</code>, normal processing resumes.</li>
<li><strong>Exemptions</strong>: The SlimData port (used for internal cluster communication) is always exempt from rate limiting.</li>
</ol>
<h3>Configuration</h3>
<p>Add the following to your <code>appsettings.json</code>:</p>
<pre><code class="language-json hljs"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"SlimFaas"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"RateLimiting"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"Enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"CpuHighThreshold"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">80.0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"CpuLowThreshold"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">60.0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"SampleIntervalMs"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1000</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"RetryAfterSeconds"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"ExcludedPaths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"/health"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"/ready"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"/metrics"</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>Enabled</code> (bool): Enable or disable CPU rate limiting.</li>
<li><code>CpuHighThreshold</code> (double, 0-100): CPU percentage that triggers rate limiting.</li>
<li><code>CpuLowThreshold</code> (double, 0-100): CPU percentage that stops rate limiting (must be &lt; CpuHighThreshold).</li>
<li><code>SampleIntervalMs</code> (int, ≥100): How often to sample CPU usage (milliseconds).</li>
<li><code>RetryAfterSeconds</code> (int?, optional): Value for the <code>Retry-After</code> header in 429 responses.</li>
<li><code>ExcludedPaths</code> (string[]): List of paths that bypass rate limiting (e.g., health checks).</li>
</ul>
<p><strong>Validation:</strong></p>
<ul>
<li><code>CpuLowThreshold &lt; CpuHighThreshold</code></li>
<li>Both thresholds must be between 0 and 100</li>
<li><code>SampleIntervalMs</code> must be ≥ 100</li>
</ul>
<h3>Port Exemption</h3>
<p>The CPU rate limiting middleware automatically exempts the <strong>SlimData port</strong> (configured via <code>publicEndPoint</code> in your SlimData configuration). This ensures that:</p>
<ul>
<li>Internal cluster coordination is never throttled</li>
<li>Raft consensus and state synchronization continue uninterrupted</li>
<li>Only external/public traffic on other ports is subject to rate limiting</li>
</ul>
<p>This design keeps your control plane healthy even under extreme load.</p>
<hr>
<h2>5. Build &amp; Technology Stack</h2>
<p>SlimFaas is developed in <strong>.NET</strong>, chosen for its:</p>
<ul>
<li>High performance in web APIs. SlimFaas is compile in Ahead Of Time (AOT) mode which produce a <strong>native</strong> application.</li>
<li>Excellent concurrency model.</li>
<li>Constant improvements in speed and memory usage.</li>
<li>Compact container images.</li>
</ul>
<hr>
<p>That’s the architecture in a nutshell! SlimFaas ensures your functions and jobs scale efficiently while
remaining lightweight and easy to set up.</p>
</body></html></div></div></main><footer class="footer"><div class="footer__container"><p class="footer__origin">SlimFaas was originally created by AXA France.</p><div class="footer__cncf"><p class="footer__cncf-text">We are a Cloud Native Computing Foundation sandbox project.</p><img alt="CNCF Logo" loading="lazy" width="150" height="150" decoding="async" data-nimg="1" class="footer__cncf-logo" style="color:transparent" src="https://www.cncf.io/wp-content/uploads/2022/07/cncf-stacked-color-bg.svg"/></div><p class="footer__kubecon">Learn more about us at <a href="https://events.linuxfoundation.org/kubecon-cloudnativecon/" class="footer__kubecon-link">KubeCon + CloudNativeCon</a>.</p><p class="footer__trademark">The Linux Foundation® (TLF) has registered trademarks and uses trademarks. For a list of TLF trademarks, see <a href="https://www.linuxfoundation.org/trademark-usage" class="footer__trademark-link">Trademark Usage</a>.</p><p class="footer__copyright">© SlimFaas a Series of LF Projects, LLC. All rights reserved.  | <a href="#" class="footer__trademark-link">Cookie settings</a></p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"contentHtml":"\u003chtml\u003e\u003chead\u003e\u003c/head\u003e\u003cbody\u003e\u003ch1\u003eHow SlimFaas Works (Architecture)\u003c/h1\u003e\n\u003cp\u003eUnder the hood, SlimFaas is an \u003cstrong\u003eHTTP proxy\u003c/strong\u003e that intercepts requests for your functions, jobs, or events.\nIt handles scaling, routing, and state management.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2\u003e1. Core Concepts\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eSlimFaas Pod\u003c/strong\u003e\nRuns as a \u003cstrong\u003eDeployment\u003c/strong\u003e or \u003cstrong\u003eStatefulSet\u003c/strong\u003e (commonly 3 replicas in production). Each pod has internal workers:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eSlimWorker\u003c/strong\u003e: Handles async call processing.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSlimDataSynchronizationWorker\u003c/strong\u003e: Manages the embedded database cluster (Raft-based).\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eHistorySynchronizationWorker\u003c/strong\u003e: Syncs request history and logs.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eReplicasSynchronizationWorker\u003c/strong\u003e: Keeps track of your function pods’ replicas and statuses in Kubernetes.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eReplicasScaleWorker\u003c/strong\u003e: If the SlimFaas pod is leader, it scales up/down your function pods.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eSlimData\u003c/strong\u003e\nA built-in key-value store based on \u003ca href=\"https://raft.github.io/\"\u003eRaft\u003c/a\u003e, provided by .NET’s \u003ca href=\"https://github.com/dotnet/dotNext\"\u003edotNext\u003c/a\u003e.\nThis database is crucial for consistent state among SlimFaas pods.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eAnnotations\u003c/strong\u003e\nAdd or remove SlimFaas \u003cstrong\u003eannotations\u003c/strong\u003e on your pods/Deployments to control scaling, concurrency, visibility, and timeouts.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003ePublic vs. Private\u003c/strong\u003e\nRestricts who can access a function/job (any external caller vs. same-namespace or trusted pods).\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003chr\u003e\n\u003ch2\u003e2. Request Flow\u003c/h2\u003e\n\u003ch3\u003eSynchronous HTTP Calls\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eClient → SlimFaas\u003c/strong\u003e\n\u003ccode\u003eGET /function/\u0026lt;functionName\u0026gt;/...\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSlimFaas\u003c/strong\u003e ensures the target function is scaled up and ready.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSlimFaas → Function\u003c/strong\u003e\nWait for the function’s response.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSlimFaas\u003c/strong\u003e returns the function’s response to the client.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/AxaFrance/SlimFaas/blob/main/documentation/sync_http_call.PNG?raw=true\" alt=\"sync_http_call.PNG\"\u003e\u003c/p\u003e\n\u003ch3\u003eAsynchronous HTTP Calls\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eClient → SlimFaas\u003c/strong\u003e\n\u003ccode\u003eGET /async-function/\u0026lt;functionName\u0026gt;/...\u003c/code\u003e (returns immediately with \u003ccode\u003e202 Accepted\u003c/code\u003e).\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSlimFaas\u003c/strong\u003e enqueues the request in SlimData.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSlimWorker\u003c/strong\u003e processes requests in the background, respecting concurrency limits.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eFunction\u003c/strong\u003e handles each request. SlimFaas logs outcomes in SlimData.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/AxaFrance/SlimFaas/blob/main/documentation/async_http_call.PNG?raw=true\" alt=\"async_http_call.PNG\"\u003e\u003c/p\u003e\n\u003ch3\u003ePublish/Subscribe (Events)\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eClient → SlimFaas\u003c/strong\u003e\n\u003ccode\u003ePOST /publish-event/\u0026lt;eventName\u0026gt;\u003c/code\u003e with JSON payload.\u003c/li\u003e\n\u003cli\u003eSlimFaas synchronously broadcasts the payload to each subscribed function’s replicas.\u003c/li\u003e\n\u003cli\u003eEach replica processes the event and responds individually to SlimFaas.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/AxaFrance/SlimFaas/blob/main/documentation/publish_sync_call.png?raw=true\" alt=\"publish_sync_call.png\"\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch2\u003e3. Scaling Logic\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eScale to 0\u003c/strong\u003e after a defined inactivity (\u003ccode\u003eSlimFaas/TimeoutSecondBeforeSetReplicasMin\u003c/code\u003e).\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eScale from 0 to 1+\u003c/strong\u003e when a new request arrives or \u003ccode\u003ewake-function\u003c/code\u003e is called.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eOptional\u003c/strong\u003e: Use standard K8s Horizontal Pod Autoscalers or KEDA if you need more advanced scaling triggers.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2\u003e4. CPU-Aware Rate Limiting\u003c/h2\u003e\n\u003cp\u003eSlimFaas includes built-in \u003cstrong\u003eload shedding\u003c/strong\u003e to protect your cluster during traffic spikes by automatically rejecting requests when CPU usage exceeds configurable thresholds.\u003c/p\u003e\n\u003ch3\u003eKey Features\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eHysteresis support\u003c/strong\u003e: Prevents rapid toggling between limited and normal states with separate high/low thresholds.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePort-specific\u003c/strong\u003e: Applies to all SlimFaas ports \u003cstrong\u003eexcept\u003c/strong\u003e the SlimData internal port (used for cluster coordination).\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePath exclusions\u003c/strong\u003e: Configurable list of paths to exclude (e.g., health checks, metrics endpoints).\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eNative AOT compatible\u003c/strong\u003e: Minimal performance overhead.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eHow It Works\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eMonitoring\u003c/strong\u003e: A background service continuously samples CPU usage at a configurable interval.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eActivation\u003c/strong\u003e: When CPU exceeds the \u003ccode\u003eCpuHighThreshold\u003c/code\u003e, the middleware starts rejecting requests with \u003ccode\u003e429 Too Many Requests\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDeactivation\u003c/strong\u003e: When CPU drops below the \u003ccode\u003eCpuLowThreshold\u003c/code\u003e, normal processing resumes.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eExemptions\u003c/strong\u003e: The SlimData port (used for internal cluster communication) is always exempt from rate limiting.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eConfiguration\u003c/h3\u003e\n\u003cp\u003eAdd the following to your \u003ccode\u003eappsettings.json\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json hljs\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"SlimFaas\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"RateLimiting\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"Enabled\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003e\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"CpuHighThreshold\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e80.0\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"CpuLowThreshold\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e60.0\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"SampleIntervalMs\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"RetryAfterSeconds\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"ExcludedPaths\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\"/health\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\"/ready\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\"/metrics\"\u003c/span\u003e\n      \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eParameters:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eEnabled\u003c/code\u003e (bool): Enable or disable CPU rate limiting.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eCpuHighThreshold\u003c/code\u003e (double, 0-100): CPU percentage that triggers rate limiting.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eCpuLowThreshold\u003c/code\u003e (double, 0-100): CPU percentage that stops rate limiting (must be \u0026lt; CpuHighThreshold).\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSampleIntervalMs\u003c/code\u003e (int, ≥100): How often to sample CPU usage (milliseconds).\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eRetryAfterSeconds\u003c/code\u003e (int?, optional): Value for the \u003ccode\u003eRetry-After\u003c/code\u003e header in 429 responses.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eExcludedPaths\u003c/code\u003e (string[]): List of paths that bypass rate limiting (e.g., health checks).\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eValidation:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eCpuLowThreshold \u0026lt; CpuHighThreshold\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eBoth thresholds must be between 0 and 100\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSampleIntervalMs\u003c/code\u003e must be ≥ 100\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003ePort Exemption\u003c/h3\u003e\n\u003cp\u003eThe CPU rate limiting middleware automatically exempts the \u003cstrong\u003eSlimData port\u003c/strong\u003e (configured via \u003ccode\u003epublicEndPoint\u003c/code\u003e in your SlimData configuration). This ensures that:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eInternal cluster coordination is never throttled\u003c/li\u003e\n\u003cli\u003eRaft consensus and state synchronization continue uninterrupted\u003c/li\u003e\n\u003cli\u003eOnly external/public traffic on other ports is subject to rate limiting\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis design keeps your control plane healthy even under extreme load.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2\u003e5. Build \u0026amp; Technology Stack\u003c/h2\u003e\n\u003cp\u003eSlimFaas is developed in \u003cstrong\u003e.NET\u003c/strong\u003e, chosen for its:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eHigh performance in web APIs. SlimFaas is compile in Ahead Of Time (AOT) mode which produce a \u003cstrong\u003enative\u003c/strong\u003e application.\u003c/li\u003e\n\u003cli\u003eExcellent concurrency model.\u003c/li\u003e\n\u003cli\u003eConstant improvements in speed and memory usage.\u003c/li\u003e\n\u003cli\u003eCompact container images.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003eThat’s the architecture in a nutshell! SlimFaas ensures your functions and jobs scale efficiently while\nremaining lightweight and easy to set up.\u003c/p\u003e\n\u003c/body\u003e\u003c/html\u003e","metadata":{}},"__N_SSG":true},"page":"/how-it-works","query":{},"buildId":"pWr_xSZtIWvsnZ-W185ut","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>