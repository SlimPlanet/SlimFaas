<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="icon" type="image/svg+xml" href="/slimfaas.svg" data-next-head=""/><title data-next-head="">SlimFaas : The slimmest and simplest Function As A Service</title><link rel="preload" href="/SlimFaas/_next/static/css/d05d48464aebb135.css" as="style"/><link rel="stylesheet" href="/SlimFaas/_next/static/css/d05d48464aebb135.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/SlimFaas/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/SlimFaas/_next/static/chunks/webpack-9f210e339d65408d.js" defer=""></script><script src="/SlimFaas/_next/static/chunks/framework-4447c10056014a1e.js" defer=""></script><script src="/SlimFaas/_next/static/chunks/main-7e03ef997e43522e.js" defer=""></script><script src="/SlimFaas/_next/static/chunks/pages/_app-d2ab789439551c4c.js" defer=""></script><script src="/SlimFaas/_next/static/chunks/970-ad812118eff02dd7.js" defer=""></script><script src="/SlimFaas/_next/static/chunks/pages/planet-saver-92aa29d3cbf037c1.js" defer=""></script><script src="/SlimFaas/_next/static/F6zo8_ZWaKZZfhK441h8l/_buildManifest.js" defer=""></script><script src="/SlimFaas/_next/static/F6zo8_ZWaKZZfhK441h8l/_ssgManifest.js" defer=""></script></head><body><link rel="preload" as="image" href="https://www.cncf.io/wp-content/uploads/2022/07/cncf-stacked-color-bg.svg"/><div id="__next"><div class="layout"><nav class="layout__navbar"><div class="navbar__left"><a href="/SlimFaas"><img alt="Logo" data-nimg="1" loading="lazy" width="64" height="64" decoding="async" class="navbar__logo" style="color:transparent" src="/SlimFaas/slimfaas-white.svg"/></a><button class="navbar__toggle " aria-label="Toggle menu"><span></span><span></span><span></span></button><ul class="navbar__list "><li class="navbar__item"><a href="/SlimFaas">Home</a></li><li class="navbar__item"><a href="/SlimFaas/get-started">Get Started</a></li><li class="navbar__item"><a href="/SlimFaas/functions">Functions</a></li><li class="navbar__item"><a href="/SlimFaas/events">Events</a></li><li class="navbar__item"><a href="/SlimFaas/jobs">Jobs</a></li><li class="navbar__item"><a href="/SlimFaas/planet-saver">PlanetSaver</a></li><li class="navbar__item"><a href="/SlimFaas/how-it-works">How it works</a></li></ul></div><a href="https://github.com/SlimPlanet/SlimFaas" class="navbar__github" target="_blank" rel="noopener noreferrer"><svg width="32" height="32" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M12 0.296875C5.37256 0.296875 0 5.66943 0 12.2969C0 17.6394 3.43848 22.146 8.20703 23.7744C8.80762 23.8848 9.02344 23.5156 9.02344 23.1982C9.02344 22.9277 9.0127 21.9941 9.00781 20.9102C5.67188 21.6572 4.96875 19.1738 4.96875 19.1738C4.4375 17.8193 3.64062 17.498 3.64062 17.498C2.54785 16.7939 3.72461 16.8105 3.72461 16.8105C4.93359 16.8896 5.55469 18.0332 5.55469 18.0332C6.625 19.9316 8.37207 19.4082 9.0625 19.1113C9.16797 18.3301 9.45898 17.7939 9.78906 17.4863C7.14062 17.1807 4.34766 16.1582 4.34766 11.6084C4.34766 10.3223 4.8125 9.22852 5.58984 8.36133C5.46094 8.05566 5.04883 6.8418 5.71094 5.16406C5.71094 5.16406 6.72559 4.83008 9.00488 6.44336C9.97852 6.18164 11.0078 6.05078 12.0371 6.04688C13.0664 6.05078 14.0957 6.18164 15.0693 6.44336C17.3486 4.83008 18.3623 5.16406 18.3623 5.16406C19.0244 6.8418 18.6123 8.05566 18.4824 8.36133C19.2598 9.22852 19.7246 10.3223 19.7246 11.6084C19.7246 16.168 16.9277 17.1768 14.2734 17.4746C14.6914 17.8525 15.0547 18.5742 15.0547 19.7012C15.0547 21.3076 15.0391 22.6631 15.0391 23.1982C15.0391 23.5156 15.2559 23.8896 15.8613 23.7744C20.625 22.146 24.0664 17.6394 24.0664 12.2969C24 5.66943 18.6274 0.296875 12 0.296875Z"></path></svg></a></nav><main class="layout__content"><div><div><h1>SlimFaas Planet Saver <a href="https://badge.fury.io/js/%40axa-fr%2Fslimfaas-planet-saver"><img src="https://badge.fury.io/js/%40axa-fr%2Fslimfaas-planet-saver.svg" alt="npm version"></a></h1>
<blockquote>
<p><strong>Important Note</strong>: Starting from <strong>0 replicas</strong> to <strong>1 replica</strong> can be challenging because if no machine is available, the application must wait for a new machine to start. This startup process may exceed typical HTTP timeouts (for example, 7 minutes). <strong>SlimPlanet</strong> (via SlimFaas) solves this issue by providing a user-friendly interface that informs users the backend is starting, while the infrastructure wakes up in the background.</p>
</blockquote>
<p><strong>@axa-fr/slimfaas-planet-saver</strong> is a Vanilla JavaScript project to help ‚Äúsave the planet‚Äù by scaling your backends to zero when not in use, and waking them on demand. It is built around <a href="https://github.com/SlimPlanet/slimfaas">SlimFaas</a>, the slimmest and simplest Function-as-a-Service for Kubernetes.</p>
<p>SlimFaas provides an API to give your frontend detailed information about the state of your backend infrastructure. This makes <strong>@axa-fr/slimfaas-planet-saver</strong> a true <strong>‚Äúmind changer‚Äù</strong> ‚Äî in production, you can have zero replicas running for your API backend, and display a friendly message in the UI that the backend is starting (instead of showing an error). When the backend is ready, the user seamlessly continues their journey.</p>
<p><img src="https://github.com/AxaFrance/SlimFaas/blob/main/documentation/SlimfaasPlanetSaver.gif?raw=true" alt="SlimFaasPlanetSaver.gif"></p>
<hr>
<h2>Why Use @axa-fr/slimfaas-planet-saver?</h2>
<ul>
<li><strong>User-Friendly Zero-Replica</strong>: Show users a ‚Äústarting up‚Äù message instead of an error when your backend is scaling from zero.</li>
<li><strong>Easy Integration</strong>: A lightweight library that quickly plugs into your frontend code.</li>
<li><strong>Real-Time Monitoring</strong>: Continually checks your SlimFaas environment status and updates the UI when your services are ready.</li>
<li><strong>Mind Changer</strong>: Lets you remove always-on (idle) replicas. This can save costs and reduce carbon footprint.</li>
</ul>
<hr>
<h2>Installation</h2>
<p>Install via npm:</p>
<pre><code class="language-bash">npm install @axa-fr/slimfaas-planet-saver
</code></pre>
<hr>
<h2>Basic Usage (Vanilla JS Example)</h2>
<pre><code class="language-js">import { SlimFaasPlanetSaver } from '@axa-fr/slimfaas-planet-saver';

const planetSaver = new SlimFaasPlanetSaver('http://slimfaas.mycompany.com', {
    interval: 2000,
    fetch: window.fetch, // or any fetch polyfill
    updateCallback: (data) => {
        console.log('Update callback data:', data);
    },
    errorCallback: (error) => {
        console.error('Error detected:', error);
    },
    overlayStartingMessage: 'üå≥ Starting the environment... üå≥',
    overlayNoActivityMessage: 'No activity yet ‚Äî environment is sleeping.',
    overlayErrorMessage: 'An error occurred while starting the environment. Please try again later.',
});

// Initialize and begin polling
planetSaver.initialize();
planetSaver.startPolling();

// When you no longer need it:
planetSaver.cleanup();

</code></pre>
<p>This example:</p>
<ol>
<li>Initializes a SlimFaasPlanetSaver instance with a base URL to your SlimFaas server.</li>
<li>Configures callbacks for status updates and errors.</li>
<li>Starts periodic polling to monitor environment readiness.</li>
</ol>
<hr>
<h2>React.js Example</h2>
<p>Below is a simplified code snippet showing how you might wrap your React app in a <code>PlanetSaver</code> component that checks if your environment is ready before rendering children:</p>
<pre><code class="language-javascript">import React, { useState, useEffect, useRef } from 'react';
import { SlimFaasPlanetSaver } from "@axa-fr/slimfaas-planet-saver";

const PlanetSaver = ({ children, baseUrl, fetch }) => {
  const [isFirstStart, setIsFirstStart] = useState(true);
  const environmentStarterRef = useRef(null);

  useEffect(() => {
    if (!baseUrl) return;
    if (environmentStarterRef.current) return;

    const instance = new SlimFaasPlanetSaver(baseUrl, {
      interval: 2000,
      fetch,
      updateCallback: (data) => {
        const allReady = data.every((item) => item.NumberReady >= 1);
        if (allReady &#x26;&#x26; isFirstStart) {
          setIsFirstStart(false);
        }
      },
      errorCallback: (error) => {
        console.error('Error detected :', error);
      },
      overlayStartingMessage: 'üå≥ Starting the environment.... üå≥',
      overlayNoActivityMessage: 'Waiting for activity to start environment...',
      overlayErrorMessage: 'An error occurred when starting the environment. Please contact an administrator.',
      overlaySecondaryMessage: 'Startup should be fast, but if no machines are available it can take several minutes.',
      overlayLoadingIcon: 'üåç',
      overlayErrorSecondaryMessage: 'If the error persists, please contact an administrator.'
    });

    environmentStarterRef.current = instance;
    instance.initialize();
    instance.startPolling();

    return () => {
      instance.cleanup();
      environmentStarterRef.current = null;
    };
  }, [baseUrl, fetch, isFirstStart]);

  // Until the environment is confirmed ready, don't render children
  if (isFirstStart) {
    return null;
  }

  return &#x3C;>{children}&#x3C;/>;
};

export default PlanetSaver;
</code></pre>
<hr>
<h2>Usage:</h2>
<pre><code class="language-jsx">&#x3C;PlanetSaver baseUrl="http://slimfaas.mycompany.com" fetch={window.fetch}>
  &#x3C;App />
&#x3C;/PlanetSaver>
</code></pre>
<hr>
<h2>Running the Demo Locally</h2>
<p>To see @axa-fr/slimfaas-planet-saver in action:</p>
<pre><code class="language-bash">git clone https://github.com/SlimPlanet/slimfaas.git
cd slimfaas/src/SlimFaasPlanetSaver
npm install
npm run dev
</code></pre>
<p>Then open your browser at the address shown in the console to view the demo.</p>
</div></div></main><footer class="footer"><div class="footer__container"><p class="footer__origin">SlimFaas was originally created by AXA France.</p><div class="footer__cncf"><p class="footer__cncf-text">We are a Cloud Native Computing Foundation sandbox project.</p><img src="https://www.cncf.io/wp-content/uploads/2022/07/cncf-stacked-color-bg.svg" alt="CNCF Logo" class="footer__cncf-logo"/></div><p class="footer__kubecon">Learn more about us at <a href="https://events.linuxfoundation.org/kubecon-cloudnativecon/" class="footer__kubecon-link">KubeCon + CloudNativeCon</a>.</p><p class="footer__trademark">The Linux Foundation¬Æ (TLF) has registered trademarks and uses trademarks. For a list of TLF trademarks, see <a href="https://www.linuxfoundation.org/trademark-usage" class="footer__trademark-link">Trademark Usage</a>.</p><p class="footer__copyright">¬© SlimFaas a Series of LF Projects, LLC. All rights reserved.</p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"contentHtml":"\u003ch1\u003eSlimFaas Planet Saver \u003ca href=\"https://badge.fury.io/js/%40axa-fr%2Fslimfaas-planet-saver\"\u003e\u003cimg src=\"https://badge.fury.io/js/%40axa-fr%2Fslimfaas-planet-saver.svg\" alt=\"npm version\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eImportant Note\u003c/strong\u003e: Starting from \u003cstrong\u003e0 replicas\u003c/strong\u003e to \u003cstrong\u003e1 replica\u003c/strong\u003e can be challenging because if no machine is available, the application must wait for a new machine to start. This startup process may exceed typical HTTP timeouts (for example, 7 minutes). \u003cstrong\u003eSlimPlanet\u003c/strong\u003e (via SlimFaas) solves this issue by providing a user-friendly interface that informs users the backend is starting, while the infrastructure wakes up in the background.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003e@axa-fr/slimfaas-planet-saver\u003c/strong\u003e is a Vanilla JavaScript project to help ‚Äúsave the planet‚Äù by scaling your backends to zero when not in use, and waking them on demand. It is built around \u003ca href=\"https://github.com/SlimPlanet/slimfaas\"\u003eSlimFaas\u003c/a\u003e, the slimmest and simplest Function-as-a-Service for Kubernetes.\u003c/p\u003e\n\u003cp\u003eSlimFaas provides an API to give your frontend detailed information about the state of your backend infrastructure. This makes \u003cstrong\u003e@axa-fr/slimfaas-planet-saver\u003c/strong\u003e a true \u003cstrong\u003e‚Äúmind changer‚Äù\u003c/strong\u003e ‚Äî in production, you can have zero replicas running for your API backend, and display a friendly message in the UI that the backend is starting (instead of showing an error). When the backend is ready, the user seamlessly continues their journey.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/AxaFrance/SlimFaas/blob/main/documentation/SlimfaasPlanetSaver.gif?raw=true\" alt=\"SlimFaasPlanetSaver.gif\"\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch2\u003eWhy Use @axa-fr/slimfaas-planet-saver?\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eUser-Friendly Zero-Replica\u003c/strong\u003e: Show users a ‚Äústarting up‚Äù message instead of an error when your backend is scaling from zero.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEasy Integration\u003c/strong\u003e: A lightweight library that quickly plugs into your frontend code.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eReal-Time Monitoring\u003c/strong\u003e: Continually checks your SlimFaas environment status and updates the UI when your services are ready.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMind Changer\u003c/strong\u003e: Lets you remove always-on (idle) replicas. This can save costs and reduce carbon footprint.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2\u003eInstallation\u003c/h2\u003e\n\u003cp\u003eInstall via npm:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003enpm install @axa-fr/slimfaas-planet-saver\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch2\u003eBasic Usage (Vanilla JS Example)\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-js\"\u003eimport { SlimFaasPlanetSaver } from '@axa-fr/slimfaas-planet-saver';\n\nconst planetSaver = new SlimFaasPlanetSaver('http://slimfaas.mycompany.com', {\n    interval: 2000,\n    fetch: window.fetch, // or any fetch polyfill\n    updateCallback: (data) =\u003e {\n        console.log('Update callback data:', data);\n    },\n    errorCallback: (error) =\u003e {\n        console.error('Error detected:', error);\n    },\n    overlayStartingMessage: 'üå≥ Starting the environment... üå≥',\n    overlayNoActivityMessage: 'No activity yet ‚Äî environment is sleeping.',\n    overlayErrorMessage: 'An error occurred while starting the environment. Please try again later.',\n});\n\n// Initialize and begin polling\nplanetSaver.initialize();\nplanetSaver.startPolling();\n\n// When you no longer need it:\nplanetSaver.cleanup();\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis example:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eInitializes a SlimFaasPlanetSaver instance with a base URL to your SlimFaas server.\u003c/li\u003e\n\u003cli\u003eConfigures callbacks for status updates and errors.\u003c/li\u003e\n\u003cli\u003eStarts periodic polling to monitor environment readiness.\u003c/li\u003e\n\u003c/ol\u003e\n\u003chr\u003e\n\u003ch2\u003eReact.js Example\u003c/h2\u003e\n\u003cp\u003eBelow is a simplified code snippet showing how you might wrap your React app in a \u003ccode\u003ePlanetSaver\u003c/code\u003e component that checks if your environment is ready before rendering children:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport React, { useState, useEffect, useRef } from 'react';\nimport { SlimFaasPlanetSaver } from \"@axa-fr/slimfaas-planet-saver\";\n\nconst PlanetSaver = ({ children, baseUrl, fetch }) =\u003e {\n  const [isFirstStart, setIsFirstStart] = useState(true);\n  const environmentStarterRef = useRef(null);\n\n  useEffect(() =\u003e {\n    if (!baseUrl) return;\n    if (environmentStarterRef.current) return;\n\n    const instance = new SlimFaasPlanetSaver(baseUrl, {\n      interval: 2000,\n      fetch,\n      updateCallback: (data) =\u003e {\n        const allReady = data.every((item) =\u003e item.NumberReady \u003e= 1);\n        if (allReady \u0026#x26;\u0026#x26; isFirstStart) {\n          setIsFirstStart(false);\n        }\n      },\n      errorCallback: (error) =\u003e {\n        console.error('Error detected :', error);\n      },\n      overlayStartingMessage: 'üå≥ Starting the environment.... üå≥',\n      overlayNoActivityMessage: 'Waiting for activity to start environment...',\n      overlayErrorMessage: 'An error occurred when starting the environment. Please contact an administrator.',\n      overlaySecondaryMessage: 'Startup should be fast, but if no machines are available it can take several minutes.',\n      overlayLoadingIcon: 'üåç',\n      overlayErrorSecondaryMessage: 'If the error persists, please contact an administrator.'\n    });\n\n    environmentStarterRef.current = instance;\n    instance.initialize();\n    instance.startPolling();\n\n    return () =\u003e {\n      instance.cleanup();\n      environmentStarterRef.current = null;\n    };\n  }, [baseUrl, fetch, isFirstStart]);\n\n  // Until the environment is confirmed ready, don't render children\n  if (isFirstStart) {\n    return null;\n  }\n\n  return \u0026#x3C;\u003e{children}\u0026#x3C;/\u003e;\n};\n\nexport default PlanetSaver;\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch2\u003eUsage:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e\u0026#x3C;PlanetSaver baseUrl=\"http://slimfaas.mycompany.com\" fetch={window.fetch}\u003e\n  \u0026#x3C;App /\u003e\n\u0026#x3C;/PlanetSaver\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch2\u003eRunning the Demo Locally\u003c/h2\u003e\n\u003cp\u003eTo see @axa-fr/slimfaas-planet-saver in action:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003egit clone https://github.com/SlimPlanet/slimfaas.git\ncd slimfaas/src/SlimFaasPlanetSaver\nnpm install\nnpm run dev\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen open your browser at the address shown in the console to view the demo.\u003c/p\u003e\n","metadata":{}},"__N_SSG":true},"page":"/planet-saver","query":{},"buildId":"F6zo8_ZWaKZZfhK441h8l","assetPrefix":"/SlimFaas","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>