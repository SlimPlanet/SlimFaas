{"pageProps":{"contentHtml":"<html><head></head><body><h1>Events in SlimFaas</h1>\n<p>SlimFaas supports a basic “publish/subscribe” model for broadcasting events to all replicas of a function.\nThis can be used to trigger internal actions or notify your functions of certain events.</p>\n<hr>\n<h2>1. Subscribe to Events</h2>\n<p>To allow a function to <strong>receive</strong> events, add the annotation <code>SlimFaas/SubscribeEvents</code> to the function's deployment:</p>\n<pre><code class=\"language-yaml hljs\"><span class=\"hljs-params\">metadata:</span>\n  <span class=\"hljs-params\">annotations:</span>\n    SlimFaas<span class=\"hljs-operator\">/</span><span class=\"hljs-params\">SubscribeEvents:</span> <span class=\"hljs-string\">\"Public:my-event1,Private:my-event2,my-event3\"</span>\n</code></pre>\n<ul>\n<li><strong>Public events</strong> can be sent from any source.</li>\n<li><strong>Private event</strong>s can only be sent by trusted pods or within the same namespace.</li>\n<li>If you omit <code>Public:</code> or <code>Private:</code>, it defaults to <code>SlimFaas/DefaultVisibility</code>.</li>\n</ul>\n<hr>\n<h2>2. Publishing an Event</h2>\n<p>Use the following HTTP route to publish an event:</p>\n<ul>\n<li>\n<p><strong>Endpoint</strong>: <code>POST http://&lt;slimfaas&gt;/publish-event/&lt;eventName&gt;/&lt;path&gt;</code></p>\n</li>\n<li>\n<p><strong>Body</strong> (any JSON payload):</p>\n</li>\n</ul>\n<pre><code class=\"language-json hljs\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">\"data\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"my-event-data\"</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<ul>\n<li><strong>Response</strong>: <code>204 (No Content)</code></li>\n</ul>\n<hr>\n<h2>3. Example</h2>\n<pre><code class=\"language-bash hljs\"><span class=\"hljs-attribute\">curl</span> -X POST -H <span class=\"hljs-string\">\"Content-Type: application/json\"</span> <span class=\"hljs-punctuation\">\\\n</span>     -d '{<span class=\"hljs-string\">\"data\"</span>:<span class=\"hljs-string\">\"hello\"</span>}' <span class=\"hljs-punctuation\">\\\n</span>     http://localhost:<span class=\"hljs-number\">30021</span>/publish-event/my-event-name/hello\n\n</code></pre>\n<p>All function replicas that have subscribed to <code>my-event-name</code> will receive a POST request at their /hello URL (e.g., <code>http://&lt;pod_ip&gt;:&lt;pod_port&gt;/hello</code>), and can handle it as needed.</p>\n<div class=\"mermaid\">flowchart LR\n  %% SlimFaas Events: publish/subscribe broadcast to all replicas\n\n  subgraph Publish[\"1) Publish path (HTTP ingress)\"]\n    P[Publisher&lt;br/&gt;Client / tool / pod]\n    GW[SlimFaas Gateway&lt;br/&gt;Publish Event Route]\n    VIS{Visibility rules&lt;br/&gt;Public / Private / Default}\n    AUTH[\"Private: trust check&lt;br/&gt;(trusted pods / same namespace)\"]\n    BUS[Event Dispatcher / Bus]\n\n    P --&gt;|POST /publish-event/&lt;eventName&gt;/&lt;path&gt;&lt;br/&gt;JSON body| GW\n    GW --&gt; VIS\n    VIS --&gt;|Public| BUS\n    VIS --&gt;|Private| AUTH\n    AUTH --&gt;|allowed| BUS\n    AUTH --&gt;|denied| DENY[Reject / ignore]\n    GW --&gt;|204 No Content| P\n  end\n\n  subgraph Delivery[\"2) Delivery path (fan-out to replicas)\"]\n    SUBS[Subscription Resolver&lt;br/&gt;SlimFaas/SubscribeEvents annotation]\n    TARGETS[\"Target function replicas&lt;br/&gt;(all subscribed pods)\"]\n    POD1[(Replica #1)]\n    POD2[(Replica #2)]\n    PODN[(Replica #N)]\n\n    BUS --&gt; SUBS\n    SUBS --&gt;|Match: eventName| TARGETS\n    TARGETS --&gt;|POST /&lt;path&gt;&lt;br/&gt;same JSON payload| POD1\n    TARGETS --&gt;|POST /&lt;path&gt;&lt;br/&gt;same JSON payload| POD2\n    TARGETS --&gt;|POST /&lt;path&gt;&lt;br/&gt;same JSON payload| PODN\n  end\n\n</div>\n</body></html>","metadata":{}},"__N_SSG":true}