{"pageProps":{"contentHtml":"<html><head></head><body><h1>Data Sets API</h1>\n<p>SlimFaas provides a <strong>Redis-like, cluster-consistent key/value store</strong> through the <code>/data/sets</code> endpoints.</p>\n<p>Use it to store <strong>small values</strong> (cache entries, JSON state, flags, checkpoints) with a robust replication protocol (SlimData + Raft).</p>\n<ul>\n<li><strong>Max payload size:</strong> 1 MiB per entry</li>\n<li><strong>TTL unit:</strong> milliseconds (<code>ttl</code> query parameter)</li>\n</ul>\n<blockquote>\n<p>Not for large file storage. For large binaries (PDF, ZIP, audio, PPTX, ...), use <strong>Data Files</strong>: <a href=\"https://slimfaas.dev/data-files\">https://slimfaas.dev/data-files</a></p>\n</blockquote>\n<hr>\n<h2>How it works (high-level)</h2>\n<div class=\"mermaid\">flowchart LR\n  C[Client] --&gt;|HTTP| API[SlimFaas /data/sets]\n  API --&gt;|SetAsync / GetAsync / DeleteAsync| DB[SlimData]\n  DB --&gt;|Raft replication| N1[(Node A)]\n  DB --&gt;|Raft replication| N2[(Node B)]\n  DB --&gt;|Raft replication| N3[(Node C)]\n  DB --&gt; TTL[TTL metadata]\n  TTL --&gt; EXP[Auto-expire]\n</div>\n<hr>\n<h2>Endpoints</h2>\n<p>Base path: <code>/data/sets</code></p>\n<div class=\"table-scroll\" role=\"region\" aria-label=\"Scrollable table\" tabindex=\"0\"><table>\n<thead>\n<tr>\n<th>Method</th>\n<th>Path</th>\n<th>Purpose</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>POST</code></td>\n<td><code>/data/sets?id={id?}&amp;ttl={ttl_ms?}</code></td>\n<td>Create or overwrite a value</td>\n</tr>\n<tr>\n<td><code>GET</code></td>\n<td><code>/data/sets/{id}</code></td>\n<td>Read a value</td>\n</tr>\n<tr>\n<td><code>GET</code></td>\n<td><code>/data/sets</code></td>\n<td>List entries (IDs + expiration)</td>\n</tr>\n<tr>\n<td><code>DELETE</code></td>\n<td><code>/data/sets/{id}</code></td>\n<td>Delete a value</td>\n</tr>\n</tbody>\n</table></div>\n<h3>IDs</h3>\n<ul>\n<li>IDs are validated server-side (<code>IdValidator.IsSafeId</code>).</li>\n<li>If <code>id</code> is omitted (or empty), SlimFaas generates one (<code>Guid.NewGuid().ToString(\"N\")</code>) and returns it.</li>\n</ul>\n<h3>TTL (milliseconds)</h3>\n<ul>\n<li><code>ttl</code> is optional and expressed in <strong>milliseconds</strong>.</li>\n<li>When provided, the entry auto-expires after the TTL.</li>\n</ul>\n<p>Examples:</p>\n<ul>\n<li><code>ttl=60000</code> → 1 minute</li>\n<li><code>ttl=600000</code> → 10 minutes</li>\n</ul>\n<hr>\n<h2>Create / overwrite</h2>\n<p><code>POST /data/sets?id={id?}&amp;ttl={ttl_ms?}</code></p>\n<ul>\n<li>Body is stored as raw bytes.</li>\n<li>Payload larger than 1 MiB returns <strong>413 Payload Too Large</strong>.</li>\n</ul>\n<p>Examples:</p>\n<p>Store JSON with a fixed id:</p>\n<pre><code class=\"language-bash hljs\"><span class=\"hljs-attribute\">curl</span> -X POST <span class=\"hljs-string\">\"http://&lt;slimfaas&gt;/data/sets?id=my-usecase/session-123/state\"</span> <span class=\"hljs-punctuation\">\\\n</span>  -H <span class=\"hljs-string\">\"Content-Type: application/json\"</span> <span class=\"hljs-punctuation\">\\\n</span>  --data-binary '{<span class=\"hljs-string\">\"step\"</span>:<span class=\"hljs-string\">\"route\"</span>,<span class=\"hljs-string\">\"chosen\"</span>:<span class=\"hljs-string\">\"kb_rag\"</span>,<span class=\"hljs-string\">\"confidence\"</span>:<span class=\"hljs-number\">0</span>.<span class=\"hljs-number\">92</span>}'\n</code></pre>\n<p>Store a string:</p>\n<pre><code class=\"language-bash hljs\"><span class=\"hljs-attribute\">curl</span> -X POST <span class=\"hljs-string\">\"http://&lt;slimfaas&gt;/data/sets?id=my-usecase/session-123/flag\"</span> <span class=\"hljs-punctuation\">\\\n</span>  -H <span class=\"hljs-string\">\"Content-Type: text/plain\"</span> <span class=\"hljs-punctuation\">\\\n</span>  --data-binary <span class=\"hljs-string\">\"ready\"</span>\n</code></pre>\n<p>Let SlimFaas generate the id:</p>\n<pre><code class=\"language-bash hljs\">ID=$(curl -s -X POST <span class=\"hljs-string\">\"http://&lt;slimfaas&gt;/data/sets\"</span> --data-<span class=\"hljs-keyword\">binary</span> <span class=\"hljs-string\">\"hello\"</span>)\n<span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">\"created id=<span class=\"hljs-subst\">$ID</span>\"</span>\n</code></pre>\n<p>Store with TTL (10 minutes = 600000 ms):</p>\n<pre><code class=\"language-bash hljs\"><span class=\"hljs-attribute\">curl</span> -X POST <span class=\"hljs-string\">\"http://&lt;slimfaas&gt;/data/sets?id=my-usecase/session-123/state&amp;ttl=600000\"</span> <span class=\"hljs-punctuation\">\\\n</span>  --data-binary <span class=\"hljs-string\">\"temporary\"</span>\n</code></pre>\n<hr>\n<h2>Read</h2>\n<p><code>GET /data/sets/{id}</code></p>\n<ul>\n<li>Returns raw bytes as <code>application/octet-stream</code>.</li>\n<li><code>404 Not Found</code> when missing or expired.</li>\n</ul>\n<p>Examples:</p>\n<pre><code class=\"language-bash hljs\">curl -L <span class=\"hljs-string\">\"http://&lt;slimfaas&gt;/data/sets/my-usecase/session-123/state\"</span> -o value.<span class=\"hljs-keyword\">bin\n</span></code></pre>\n<p>If you stored JSON:</p>\n<pre><code class=\"language-bash hljs\">curl <span class=\"hljs-punctuation\">-</span>s <span class=\"hljs-string\">\"http://&lt;slimfaas&gt;/data/sets/my-usecase/session-123/state\"</span> <span class=\"hljs-string\">| jq .</span>\n</code></pre>\n<hr>\n<h2>List</h2>\n<p><code>GET /data/sets</code></p>\n<p>Returns a JSON array:</p>\n<pre><code class=\"language-json hljs\">[\n  { <span class=\"hljs-string\">\"id\"</span>: <span class=\"hljs-string\">\"abc\"</span>, <span class=\"hljs-string\">\"expireAtUtcTicks\"</span>: <span class=\"hljs-number\">-1</span> },\n  { <span class=\"hljs-string\">\"id\"</span>: <span class=\"hljs-string\">\"xyz\"</span>, <span class=\"hljs-string\">\"expireAtUtcTicks\"</span>: <span class=\"hljs-number\">638720123456789012</span> }\n]\n</code></pre>\n<ul>\n<li><code>expireAtUtcTicks</code> is UTC DateTime ticks (100 ns units).</li>\n<li><code>-1</code> means “no expiration”.</li>\n</ul>\n<hr>\n<h2>Delete</h2>\n<p><code>DELETE /data/sets/{id}</code></p>\n<ul>\n<li>Returns <strong>204 No Content</strong>.</li>\n</ul>\n<p>Example:</p>\n<pre><code class=\"language-bash hljs\">curl -X <span class=\"hljs-keyword\">DELETE</span> <span class=\"hljs-string\">\"http://&lt;slimfaas&gt;/data/sets/my-usecase/session-123/state\"</span>\n</code></pre>\n<hr>\n<h2>Visibility &amp; security</h2>\n<p><code>/data/sets</code> is protected by the same data visibility policy used by other data endpoints (<code>DataVisibilityEndpointFilter</code>).</p>\n<p><code>appsettings.json</code>:</p>\n<pre><code class=\"language-json hljs\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">\"Data\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">\"DefaultVisibility\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Private\"</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<p>Env override:</p>\n<ul>\n<li><code>Data:DefaultVisibility</code> → <code>Data__DefaultVisibility</code></li>\n</ul>\n</body></html>","metadata":{}},"__N_SSG":true}